{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<link rel="stylesheet" href="{% static 'css/clinicas.css' %}">

{% endblock %}

{% block content %}
<!-- Hero -->
<section class="hero">
    <h1>Bienvenido a PetComunity</h1>
    <p>Conectamos mascotas, personas y veterinarias para una vida mejor üíñ</p>
    <a href="{% url 'adopciones' %}" class="btn">Ver Mascotas en Adopci√≥n</a>
</section>

<!-- Mascotas Destacadas -->
<section class="destacados">
    <h2>Mascotas en adopci√≥n</h2>
  
    <div id="carrusel" class="carousel-container">
      <div class="carousel">
        {% for mascota in mascotas_clinica %}
      <div class="carousel-item">
        <img src="{{ mascota.imagen.url }}" alt="{{ mascota.nombre }}">
        <div class="info">
          <h3>{{ mascota.nombre }}</h3>
          <p>{{ mascota.especie }} - {{ mascota.edad }} a√±os</p>
          <a href="{% url 'detalle_mascota' mascota.id %}" class="btn-ver">Ver m√°s</a>
        </div>
      </div>
    {% endfor %}
    {% for mascota in mascotas_clinica %}
      <!-- Lo mismo para repetir los items y dar la ilusi√≥n de bucle -->
      <div class="carousel-item">
        <img src="{{ mascota.imagen.url }}" alt="{{ mascota.nombre }}">
        <div class="info">
          <h3>{{ mascota.nombre }}</h3>
          <p>{{ mascota.especie }} - {{ mascota.edad }} a√±os</p>
          <a href="{% url 'detalle_mascota' mascota.id %}" class="btn-ver">Ver m√°s</a>
        </div>
      </div>
    {% endfor %}

      </div>

    </div>
    
</section>

<!-- Cl√≠nicas -->
<section class="clinicas-home">
    <h2>üè• Cl√≠nicas Veterinarias</h2>
    <div class="cards-container clinicas-container">
        {% if clinicas %}
            {% for clinica in clinicas %}
                <div class="card clinica-card">
                    {% if clinica.profile.imagen %}
                        <img src="{{ clinica.profile.imagen.url }}" alt="{{ clinica.username }}">
                    {% else %}
                        <img src="{% static 'img/default_clinica.jpg' %}" alt="Imagen por defecto">
                    {% endif %}
                    <h3>{{ clinica.username }}</h3>

                    <p><strong>Tel√©fono:</strong> {{ clinica.profile.telefono|default:"No disponible" }}</p>

                    <p><strong>Horarios de atenci√≥n:</strong></p>
                    <ul>
                        {% for horario in clinica.profile.horarios.all %}
                            <li>{{ horario.dia }}: {{ horario.hora_inicio|time:"H:i" }} - {{ horario.hora_fin|time:"H:i" }}</li>
                        {% empty %}
                            <li>No hay horarios registrados.</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endfor %}
        {% else %}
            <p>No hay cl√≠nicas registradas a√∫n.</p>
        {% endif %}
    </div>
    <div class="btn-container">
        <a href="{% url 'clinicas' %}" class="btn">Ver todas las cl√≠nicas</a>
    </div>
</section>

<!-- Farmacias -->
<section class="productos-section">
  <h2>üõí Productos Disponibles</h2>
  {% if productos %}
    <div class="destacados-container">
      {% for producto in productos %}
        <div class="destacado-card">
          {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
          {% endif %}
          <h3>{{ producto.nombre }}</h3>
          <p>${{ producto.precio }}</p>
          
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No hay productos disponibles en este momento.</p>
  {% endif %}
</section>

<!-- Testimonios -->
<section class="testimonios-home">
  <h2>Lo que dicen nuestros usuarios</h2>
  <div class="testimonios-container">
    <div class="testimonios-slider" id="testimoniosSlider">
      <div class="testimonial">
        ‚ÄúPetComunity me ayud√≥ a encontrar la cl√≠nica perfecta para mi perro. ¬°Muy recomendado!‚Äù
        <span>- Ana P.</span>
      </div>
      <div class="testimonial">
        ‚ÄúGracias a esta plataforma adopt√© a Pelusa, y ahora tenemos una familia feliz.‚Äù
        <span>- Alejandro G.</span>
      </div>
      <div class="testimonial">
        ‚ÄúSubir mis productos a PetComunity fue muy f√°cil y ya tengo m√°s clientes.‚Äù
        <span>- Farmacia VetCare</span>
      </div>
    </div>

    <button class="carousel-btn prev" onclick="moveSlide(-1)">‚Äπ</button>
    <button class="carousel-btn next" onclick="moveSlide(1)">‚Ä∫</button>
  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
  const slider = document.getElementById('testimoniosSlider');
  let currentIndex = 0;
  const totalSlides = slider.children.length;

  function moveSlide(direction) {
    currentIndex += direction;
    if (currentIndex < 0) currentIndex = totalSlides - 1;
    if (currentIndex >= totalSlides) currentIndex = 0;
    slider.style.transform = `translateX(-${currentIndex * 100}%)`;
  }
</script>
{% endblock %}
