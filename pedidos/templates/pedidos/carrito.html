{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/carrito.css' %}">
{% endblock %}

{% block content %}
<section class="carrito-section">
  <h2>Tu Carrito de Compras</h2>

  {% if items %}
    <table class="carrito-table">
      <thead>
        <tr>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio unitario</th>
          <th>Subtotal</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td>{{ item.producto.nombre }}</td>
          <td>{{ item.cantidad }}</td>
          <td>${{ item.producto.precio }}</td>
          <td>${{ item.subtotal }}</td>
          <td>
            <a href="{% url 'pedidos:agregar_al_carrito' item.producto.id %}?accion=restar" class="btn-restar">-</a>
            <a href="{% url 'pedidos:agregar_al_carrito' item.producto.id %}?accion=agregar" class="btn-agregar">+</a>

            <a href="{% url 'pedidos:eliminar_del_carrito' item.producto.id %}" class="btn-eliminar">Eliminar</a>

          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="total-container">
      <p><strong>Total: ${{ total }}</strong></p>
      <a href="{% url 'pedidos:finalizar_pedido' %}" class="btn-finalizar">Finalizar Pedido</a>
    </div>

  {% else %}
    <p>Tu carrito está vacío.</p>
  {% endif %}
</section>
{% endblock %}
